{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/arpine_h/projects/live-now/src/Photo.tsx\";\nimport React, { Component } from 'react';\nimport { ReactComponent as Logo } from \"@svgr/webpack?-svgo,+titleProp,+ref!./images/logo.svg\";\nimport { ReactComponent as Lines } from \"@svgr/webpack?-svgo,+titleProp,+ref!./images/three-horizontal-lines.svg\";\nconst videoResolution = {\n  width: 300,\n  height: 300\n};\nvar Views;\n\n(function (Views) {\n  Views[\"account\"] = \"ACCOUNT\";\n  Views[\"register\"] = \"REGISTER\";\n  Views[\"photo\"] = \"PHOTO\";\n})(Views || (Views = {}));\n\nexport default class Photo extends Component {\n  constructor(...args) {\n    super(...args);\n    this.videoRef = /*#__PURE__*/React.createRef();\n    this.videoCanvasRef = /*#__PURE__*/React.createRef();\n    this.video = void 0;\n    this.canvas = document.createElement('canvas');\n\n    this.takePhoto = () => {\n      const videoWidth = videoResolution.width;\n      const videoHeight = videoResolution.height;\n      const ctx = this.canvas.getContext('2d'); // const longEdge = 1920;\n      // const shortEdge = 1080;\n\n      this.canvas.width = videoHeight;\n      this.canvas.height = videoWidth;\n      if (ctx) ctx.drawImage(this.video, 0, 0, videoHeight, videoWidth, 0, 0, videoHeight, videoWidth);\n      const data = this.canvas.toDataURL('image/jpeg');\n      debugger;\n      return data;\n    };\n  }\n\n  componentDidMount() {\n    this.video = this.videoRef.current;\n    this.showVideo();\n  }\n\n  showVideo() {\n    const video = {// width: videoResolution.width,\n      // height: videoResolution.height,\n    };\n    window.navigator.mediaDevices.getUserMedia({\n      video,\n      audio: false\n    }).then(stream => {\n      if (stream === null) return;\n      this.video.srcObject = stream;\n\n      try {\n        this.video.play();\n      } catch (err) {\n        console.log(err);\n        return;\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    const {\n      setView\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"photo-component\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header\",\n        children: [/*#__PURE__*/_jsxDEV(Logo, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lines\",\n          role: \"button\",\n          onKeyUp: () => setView(Views.register),\n          onClick: () => setView(Views.register),\n          children: /*#__PURE__*/_jsxDEV(Lines, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main\",\n        children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: this.videoCanvasRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n          className: \"video\",\n          ref: this.videoRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buttons-section\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"button\",\n            type: \"button\",\n            onKeyUp: () => this.takePhoto(),\n            onClick: () => this.takePhoto()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 4\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/arpine_h/projects/live-now/src/Photo.tsx"],"names":["React","Component","videoResolution","width","height","Views","Photo","videoRef","createRef","videoCanvasRef","video","canvas","document","createElement","takePhoto","videoWidth","videoHeight","ctx","getContext","drawImage","data","toDataURL","componentDidMount","current","showVideo","window","navigator","mediaDevices","getUserMedia","audio","then","stream","srcObject","play","err","console","log","catch","render","setView","props","register"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { ReactComponent as Logo } from './images/logo.svg';\nimport { ReactComponent as Lines } from './images/three-horizontal-lines.svg';\n\nconst videoResolution = { width: 300, height: 300 };\n\ntype Props = {\n\tappState: any,\n\tsetView: any,\n}\n\nenum Views {\n\taccount = 'ACCOUNT'\n\t, register = 'REGISTER'\n\t, photo = 'PHOTO'\n}\n\nexport default class Photo extends Component<Props> {\n\tprivate videoRef = React.createRef<HTMLVideoElement>();\n\tprivate videoCanvasRef = React.createRef<HTMLCanvasElement>();\n\tprivate video: any;\n\tprivate canvas = document.createElement('canvas');\n\n\tcomponentDidMount() {\n\t\tthis.video = this.videoRef.current as any;\n\n\t\tthis.showVideo();\n\t}\n\n\tshowVideo() {\n\t\tconst video: any = {\n\t\t\t// width: videoResolution.width,\n\t\t\t// height: videoResolution.height,\n\t\t};\n\t\twindow.navigator.mediaDevices.getUserMedia({\n\t\t\tvideo,\n\t\t\taudio: false,\n\t\t}).then((stream) => {\n\t\t\tif (stream === null) return;\n\t\t\tthis.video.srcObject = stream;\n\t\t\ttry {\n\t\t\t\tthis.video.play();\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(err);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}).catch((err) => {\n\t\t\tconsole.log(err);\n\t\t});\n\t}\n\n\ttakePhoto = () => {\n\t\tconst videoWidth = videoResolution.width;\n    const videoHeight = videoResolution.height;\n    const ctx = this.canvas.getContext('2d');\n    // const longEdge = 1920;\n    // const shortEdge = 1080;\n\t\tthis.canvas.width = videoHeight;\n\t\tthis.canvas.height = videoWidth;\n\t\tif (ctx) ctx.drawImage(this.video, 0, 0, videoHeight, videoWidth, 0, 0, videoHeight, videoWidth);\n\n\t\tconst data = this.canvas.toDataURL('image/jpeg');\n\t\tdebugger\n    return data;\n\t}\n\n\trender() {\n\t\tconst { setView } = this.props;\n\n\t\treturn (\n\t\t\t<div className='photo-component'>\n\t\t\t\t<div className=\"header\">\n\t\t\t\t\t<Logo />\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"lines\"\n\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\tonKeyUp={() => setView(Views.register)}\n\t\t\t\t\t\tonClick={() => setView(Views.register)}\n\t\t\t\t\t><Lines /></div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"main\">\n\t\t\t\t\t<canvas ref={this.videoCanvasRef} />\n\t\t\t\t\t<video className=\"video\" ref={this.videoRef}></video>\n\t\t\t\t\t<div className=\"buttons-section\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"button\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tonKeyUp={() => this.takePhoto()}\n\t\t\t\t\t\t\tonClick={() => this.takePhoto()}\n\t\t\t\t\t\t></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}